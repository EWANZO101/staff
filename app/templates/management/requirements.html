{% extends "base.html" %}

{% block title %}Monthly Requirements - Staff Scheduler{% endblock %}

{% block content %}
<div class="mb-6">
    <h1 class="text-2xl font-bold text-white">Monthly Requirements</h1>
    <p class="text-gray-400 mt-1">Set required working hours and days for each month</p>
</div>

<!-- Year Navigation -->
<div class="flex items-center justify-center mb-6">
    <a href="{{ url_for('management.requirements', year=year-1) }}" 
       class="p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors">
        <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
    </a>
    <span class="mx-6 text-xl font-semibold text-white">{{ year }}</span>
    <a href="{{ url_for('management.requirements', year=year+1) }}" 
       class="p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors">
        <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
    </a>
</div>

<!-- Requirements Grid -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
    {% for month in months %}
    <div class="bg-gray-800 rounded-lg border border-gray-700 p-4">
        <h3 class="text-lg font-semibold text-white mb-4">{{ month.name }}</h3>
        
        <form action="{{ url_for('management.update_requirement') }}" method="POST" class="space-y-3">
            <input type="hidden" name="year" value="{{ year }}">
            <input type="hidden" name="month" value="{{ month.number }}">
            
            <div>
                <label class="block text-xs font-medium text-gray-400 mb-1">Required Hours</label>
                <input type="number" name="required_hours" step="0.5" min="0"
                       value="{{ month.requirement.required_hours if month.requirement else '' }}"
                       placeholder="e.g., 160"
                       class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            </div>
            
            <div>
                <label class="block text-xs font-medium text-gray-400 mb-1">Required Days</label>
                <input type="number" name="required_days" min="0" max="31"
                       value="{{ month.requirement.required_days if month.requirement else '' }}"
                       placeholder="e.g., 22"
                       class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            </div>
            
            <div>
                <label class="block text-xs font-medium text-gray-400 mb-1">Notes</label>
                <input type="text" name="notes"
                       value="{{ month.requirement.notes if month.requirement else '' }}"
                       placeholder="Optional notes"
                       class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            </div>
            
            <button type="submit" 
                    class="w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors">
                {% if month.requirement %}Update{% else %}Save{% endif %}
            </button>
        </form>
        
        {% if month.requirement %}
        <div class="mt-3 pt-3 border-t border-gray-700">
            <p class="text-xs text-gray-500">
                Last updated by ID #{{ month.requirement.created_by }}
            </p>
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div>

<!-- Info Card -->
<div class="mt-6 bg-gray-800 rounded-lg border border-gray-700 p-4">
    <div class="flex items-start space-x-3">
        <svg class="w-6 h-6 text-blue-400 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <div>
            <h4 class="text-white font-medium">About Monthly Requirements</h4>
            <p class="text-gray-400 text-sm mt-1">
                Set the expected working hours and days for each month. These values are used in reports 
                to compare actual scheduled time against requirements. Leave fields blank if no specific 
                requirement is set for that month.
            </p>
        </div>
    </div>
</div>
{% endblock %}
