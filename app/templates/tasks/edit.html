{% extends "base.html" %}

{% block title %}Edit Task - Staff Scheduler{% endblock %}

{% block content %}
<div class="mb-6">
    <a href="{{ url_for('tasks.view', id=task.id) }}" class="inline-flex items-center text-gray-400 hover:text-gray-200 mb-4">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
        </svg>
        Back to Task
    </a>
    <h1 class="text-2xl font-bold text-gray-100">Edit Task</h1>
    <p class="text-gray-400 mt-1">Update task details</p>
</div>

<form method="POST" class="max-w-2xl">
    <div class="bg-dark-800 rounded-lg border border-dark-600 p-6 space-y-6">
        <!-- Title -->
        <div>
            <label for="title" class="block text-sm font-medium text-gray-300 mb-2">Task Title *</label>
            <input type="text" id="title" name="title" required value="{{ task.title }}"
                class="w-full px-4 py-2.5 bg-dark-700 border border-dark-500 rounded-lg text-gray-200 placeholder-gray-500 focus:outline-none focus:border-blue-500">
        </div>
        
        <!-- Description -->
        <div>
            <label for="description" class="block text-sm font-medium text-gray-300 mb-2">Description</label>
            <textarea id="description" name="description" rows="4"
                class="w-full px-4 py-2.5 bg-dark-700 border border-dark-500 rounded-lg text-gray-200 placeholder-gray-500 focus:outline-none focus:border-blue-500">{{ task.description or '' }}</textarea>
        </div>
        
        <!-- Assignee, Priority, Status Row -->
        <div class="grid gap-4 sm:grid-cols-3">
            <div>
                <label for="assigned_to" class="block text-sm font-medium text-gray-300 mb-2">Assign To</label>
                <select id="assigned_to" name="assigned_to"
                    class="w-full px-4 py-2.5 bg-dark-700 border border-dark-500 rounded-lg text-gray-200 focus:outline-none focus:border-blue-500">
                    <option value="">Unassigned</option>
                    {% for user in users %}
                    <option value="{{ user.id }}" {% if task.assigned_to == user.id %}selected{% endif %}>{{ user.full_name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div>
                <label for="priority" class="block text-sm font-medium text-gray-300 mb-2">Priority</label>
                <select id="priority" name="priority"
                    class="w-full px-4 py-2.5 bg-dark-700 border border-dark-500 rounded-lg text-gray-200 focus:outline-none focus:border-blue-500">
                    <option value="low" {% if task.priority == 'low' %}selected{% endif %}>âšª Low</option>
                    <option value="medium" {% if task.priority == 'medium' %}selected{% endif %}>ðŸŸ¡ Medium</option>
                    <option value="high" {% if task.priority == 'high' %}selected{% endif %}>ðŸŸ  High</option>
                    <option value="urgent" {% if task.priority == 'urgent' %}selected{% endif %}>ðŸ”´ Urgent</option>
                </select>
            </div>
            
            <div>
                <label for="status" class="block text-sm font-medium text-gray-300 mb-2">Status</label>
                <select id="status" name="status"
                    class="w-full px-4 py-2.5 bg-dark-700 border border-dark-500 rounded-lg text-gray-200 focus:outline-none focus:border-blue-500">
                    <option value="pending" {% if task.status == 'pending' %}selected{% endif %}>Pending</option>
                    <option value="in_progress" {% if task.status == 'in_progress' %}selected{% endif %}>In Progress</option>
                    <option value="completed" {% if task.status == 'completed' %}selected{% endif %}>Completed</option>
                    <option value="cancelled" {% if task.status == 'cancelled' %}selected{% endif %}>Cancelled</option>
                </select>
            </div>
        </div>
        
        <!-- Due Date & Time Row -->
        <div class="grid gap-4 sm:grid-cols-2">
            <div>
                <label for="due_date" class="block text-sm font-medium text-gray-300 mb-2">Due Date</label>
                <input type="date" id="due_date" name="due_date" 
                    value="{{ task.due_date.strftime('%Y-%m-%d') if task.due_date else '' }}"
                    class="w-full px-4 py-2.5 bg-dark-700 border border-dark-500 rounded-lg text-gray-200 focus:outline-none focus:border-blue-500">
            </div>
            
            <div>
                <label for="due_time" class="block text-sm font-medium text-gray-300 mb-2">Due Time</label>
                <input type="time" id="due_time" name="due_time"
                    value="{{ task.due_time.strftime('%H:%M') if task.due_time else '' }}"
                    class="w-full px-4 py-2.5 bg-dark-700 border border-dark-500 rounded-lg text-gray-200 focus:outline-none focus:border-blue-500">
            </div>
        </div>
        
        <!-- Category -->
        <div>
            <label for="category" class="block text-sm font-medium text-gray-300 mb-2">Category</label>
            <input type="text" id="category" name="category" list="categories" value="{{ task.category or '' }}"
                class="w-full px-4 py-2.5 bg-dark-700 border border-dark-500 rounded-lg text-gray-200 placeholder-gray-500 focus:outline-none focus:border-blue-500">
            <datalist id="categories">
                <option value="Operations">
                <option value="Admin">
                <option value="IT">
                <option value="HR">
                <option value="Finance">
                <option value="General">
            </datalist>
        </div>
    </div>
    
    <div class="mt-6 flex gap-4">
        <button type="submit" class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">
            Save Changes
        </button>
        <a href="{{ url_for('tasks.view', id=task.id) }}" class="px-6 py-2.5 bg-dark-600 hover:bg-dark-500 text-gray-200 font-medium rounded-lg transition-colors">
            Cancel
        </a>
    </div>
</form>
{% endblock %}
